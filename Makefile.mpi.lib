nc = 2

ifeq ($(adjoint),false)
	adj = 
else
	adj = -DADJOINT
endif

CC       = mpicc.mpich2
CPP      = mpicxx.mpich2
AR       = ar
OPTIMIZE = -O2 -march=native -Wall -Wextra -pipe
INC	= -I./extra_libs/Eigen -I./extra_libs/
CFLAGS   = $(OPTIMIZE) $(INC)
CPPFLAGS = $(OPTIMIZE) $(INC) -DMBE="\"$(PWD)/source/utils/MatrixBaseExtension.h\"" -DNUMCOLORS=$(nc) $(adj) -DEIGEN
MAIN = updater.o

include Makefile.obj.mk

LIBOBJ=$(filter-out updater.o,$(OBJECTS))

all: libleonardQCD
	ar rcs libleonardo.a $(LIBOBJ)


libleonardQCD: $(OBJECTS)
	@echo "done!"
	
include Makefile.list.mk

clean:
	-rm ./*.exe
	-rm ./*.o


